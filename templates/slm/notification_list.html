{% extends "base.html" %}
{% load humanize %}

{% block title %}Notifications{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Notifications</h1>
    <p class="text-gray-500 dark:text-gray-400 mt-1">Alerts and reminders</p>
</div>

<div class="space-y-3">
    {% for n in notifications %}
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4 {% if not n.is_read %}border-l-4 border-l-primary-500{% endif %}">
        <div class="flex justify-between items-start">
            <div>
                <h3 class="font-medium text-gray-900 dark:text-white">{{ n.title }}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ n.message }}</p>
                <p class="text-xs text-gray-400 mt-2">{{ n.created_at|naturaltime }}</p>
            </div>
            <div class="flex gap-2 items-center">
                {% if not n.is_read %}<a href="{% url 'slm:notification_mark_read' n.pk %}" class="text-xs text-gray-500 dark:text-gray-400 hover:underline">Mark read</a>{% endif %}
                {% if n.link %}<a href="{{ n.link }}" class="text-primary-600 dark:text-primary-400 text-sm font-medium">View</a>{% endif %}
            </div>
        </div>
    </div>
    {% empty %}
    <p class="text-gray-500 dark:text-gray-400 py-8 text-center">No notifications.</p>
    {% endfor %}
</div>

{% if page_obj.has_other_pages %}
<div class="mt-6 flex justify-between items-center">
    <span class="text-sm text-gray-500">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    <div class="flex gap-2">
        {% if page_obj.has_previous %}<a href="?page={{ page_obj.previous_page_number }}" class="px-3 py-1 rounded bg-gray-100 dark:bg-gray-700 text-sm">Previous</a>{% endif %}
        {% if page_obj.has_next %}<a href="?page={{ page_obj.next_page_number }}" class="px-3 py-1 rounded bg-gray-100 dark:bg-gray-700 text-sm">Next</a>{% endif %}
    </div>
</div>
{% endif %}
{% endblock %}
